# –°–∏—Å—Ç–µ–º–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏ Premium Chat

## –û–±–∑–æ—Ä

–î–æ–±–∞–≤–ª–µ–Ω—ã –¥–≤–µ –Ω–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
1. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –Ω–æ–≤–æ—Å—Ç—è–º** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ —Ä–µ–∞–∫—Ü–∏–∏
2. **Premium Chat** - —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π —á–∞—Ç –¥–ª—è Premium –∏ Alpha –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –Ω–æ–≤–æ—Å—Ç—è–º

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- ‚úçÔ∏è –ù–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (–¥–æ 500 —Å–∏–º–≤–æ–ª–æ–≤)
- üòä –†–µ–∞–∫—Ü–∏–∏: üëç ‚ù§Ô∏è üî• üòÇ üòÆ üò¢
- üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (–∏–ª–∏ –ª—é–±—ã—Ö –¥–ª—è –∞–¥–º–∏–Ω–æ–≤)
- üë§ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ –∏ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚è∞ –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

### API Endpoints

#### –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
```
GET /api/news/:newsId/comments
```

#### –°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
```
POST /api/news/:newsId/comments
Body: { userId, content }
```

#### –£–¥–∞–ª–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
```
DELETE /api/comments/:id
Body: { userId }
```

#### –î–æ–±–∞–≤–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é
```
POST /api/comments/:id/reaction
Body: { userId, reaction }
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –¢–∞–±–ª–∏—Ü–∞ comments
```sql
CREATE TABLE comments (
  id SERIAL PRIMARY KEY,
  news_id INTEGER REFERENCES news(id) ON DELETE CASCADE,
  user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
  content TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### –¢–∞–±–ª–∏—Ü–∞ comment_reactions
```sql
CREATE TABLE comment_reactions (
  id SERIAL PRIMARY KEY,
  comment_id INTEGER REFERENCES comments(id) ON DELETE CASCADE,
  user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
  reaction VARCHAR(10) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  UNIQUE(comment_id, user_id, reaction)
);
```

## Premium Chat

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- üí¨ –†–µ–∞–ª-—Ç–∞–π–º –æ–±—â–µ–Ω–∏–µ (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥)
- üîí –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è Premium/Alpha –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üìù –°–æ–æ–±—â–µ–Ω–∏—è –¥–æ 300 —Å–∏–º–≤–æ–ª–æ–≤
- üë• –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–Ω–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚ö° –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –±–µ–π–¥–∂–∏ –¥–ª—è Alpha –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üìú –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 100 —Å–æ–æ–±—â–µ–Ω–∏–π

### API Endpoints

#### –ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
```
GET /api/premium-chat?userId=:userId
```
–¢—Ä–µ–±—É–µ—Ç—Å—è: subscription = 'premium' –∏–ª–∏ 'alpha'

#### –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
```
POST /api/premium-chat
Body: { userId, message }
```
–¢—Ä–µ–±—É–µ—Ç—Å—è: subscription = 'premium' –∏–ª–∏ 'alpha'

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –¢–∞–±–ª–∏—Ü–∞ premium_chat
```sql
CREATE TABLE premium_chat (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
  message TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### CommentsSection.tsx
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∫ –Ω–æ–≤–æ—Å—Ç–∏.

**Props:**
- `newsId: number` - ID –Ω–æ–≤–æ—Å—Ç–∏

**–§—É–Ω–∫—Ü–∏–∏:**
- –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–∞–∫—Ü–∏–π
- –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

### PremiumChat.tsx
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–≥–æ —á–∞—Ç–∞ –¥–ª—è –ø—Ä–µ–º–∏—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

**–§—É–Ω–∫—Ü–∏–∏:**
- –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π (–∫–∞–∂–¥—ã–µ 5 —Å–µ–∫)
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –∫ –Ω–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è–º
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ

### PremiumChatPage.tsx
–û—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –ø—Ä–µ–º–∏—É–º —á–∞—Ç–∞ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π.

**–†–æ—É—Ç:** `/premium-chat`

## –°—Ç–∏–ª–∏

### CommentsSection.css
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è
- Hover —ç—Ñ—Ñ–µ–∫—Ç—ã
- –†–µ–∞–∫—Ü–∏–∏ —Å —Å—á–µ—Ç—á–∏–∫–∞–º–∏

### PremiumChat.css
- –ß–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –ø—É–∑—ã—Ä—è–º–∏
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–≤–æ–∏—Ö/—á—É–∂–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª
- Locked —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö

### PremiumChatPage.css
- Hero —Å–µ–∫—Ü–∏—è —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏
- –ê–Ω–∏–º–∞—Ü–∏—è –∏–∫–æ–Ω–æ–∫
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Rate Limiting
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã `apiLimiter`:
- 30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É –Ω–∞ IP

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π/–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: –ª—é–±–æ–π –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: –∞–≤—Ç–æ—Ä –∏–ª–∏ –∞–¥–º–∏–Ω
- Premium Chat: —Ç–æ–ª—å–∫–æ Premium/Alpha –ø–æ–¥–ø–∏—Å–∫–∞

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
```tsx
import CommentsSection from '../components/CommentsSection'

<CommentsSection newsId={post.id} />
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–º–∏—É–º —á–∞—Ç–∞
```tsx
import PremiumChat from '../components/PremiumChat'

<PremiumChat />
```

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] WebSocket –¥–ª—è —Ä–µ–∞–ª-—Ç–∞–π–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- [ ] –û—Ç–≤–µ—Ç—ã –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (threading)
- [ ] –£–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (@username)
- [ ] Markdown –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- [ ] –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- [ ] –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- [ ] –ì–æ–ª–æ—Å–æ–≤–æ–π —á–∞—Ç –¥–ª—è Alpha
