# Обновление: JWT токены вместо сессий

## Что сделано?

Я обновил систему аутентификации, чтобы пользователи **не выходили из аккаунта** при передеплое сервера на Render.com.

## Основные изменения:

### 1. Сервер (server/index.js)
- Убрал `express-session` (сессии в памяти)
- Добавил `jsonwebtoken` для JWT токенов
- Токены живут 30 дней
- При входе пользователь получает токен

### 2. Клиент (веб + лаунчер)
- Токен сохраняется в `localStorage`
- При перезагрузке страницы пользователь остается авторизованным
- Даже после передеплоя сервера токен остается валидным

### 3. Переменные окружения
- Добавлен `JWT_SECRET` в `.env`

## Что нужно сделать для деплоя:

### 1. Установить зависимости:
```bash
npm install
```

### 2. Добавить JWT_SECRET на Render.com:
1. Зайти на https://dashboard.render.com/
2. Выбрать ваш сервис
3. Environment → Add Environment Variable
4. Добавить:
   - Key: `JWT_SECRET`
   - Value: `KOTAKBAS3991-JWT-SECRET-KEY-2024`
5. Save Changes

### 3. Задеплоить:
```bash
git add .
git commit -m "JWT токены для устойчивости к передеплою"
git push origin main
```

Render автоматически подхватит изменения и задеплоит.

## Результат:

✅ Пользователи больше **НЕ БУДУТ ВЫХОДИТЬ** из аккаунта при передеплое  
✅ Токены хранятся на клиенте, а не на сервере  
✅ Токены действительны 30 дней  
✅ Работает и для веба, и для лаунчера  

## Важно:

Существующие пользователи должны будут **войти заново один раз** после обновления. После этого они останутся авторизованными навсегда (или пока не выйдут вручную).

## Резервная копия:

Старая версия сохранена в `server/index.backup.js` на случай проблем.
